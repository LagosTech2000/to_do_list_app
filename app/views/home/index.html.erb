<div class="container mx-auto">
  <h1 class="text-3xl font-bold mb-4">Task Dashboard</h1>

  <!-- Tasks Overview -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <!-- General dashboard item -->
    <div class="bg-white rounded-lg shadow-md p-4">
      <h2 class="text-xl font-semibold mb-2">Tasks Overview</h2>
      <div class="flex items-center mb-2">
        <span class="mr-2">Total Tasks:</span>
        <%= @tasks.count %>
      </div>
      <div class="flex items-center mb-2">
        <span class="mr-2">Completed:</span>
        <%= @tasks.where(status: 'completed').count %>
      </div>
      <div class="flex items-center">
        <span class="mr-2">Pending:</span>
        <%= @tasks.where(status: 'pending').count %>
      </div>
    </div>

    <!-- Pie Chart -->
    <div class="bg-white rounded-lg shadow-md p-4">
      <h2 class="text-xl font-semibold mb-2">Task Status Distribution</h2>
      <canvas id="taskStatusChart" width="400" height="400"></canvas>
    </div>

    <!-- Progress Bar -->
    <div class="bg-white rounded-lg shadow-md p-4">
      <h2 class="text-xl font-semibold mb-2">Task Progress</h2>
      <div class="flex items-center mb-2">
        <span class="mr-2">Completed:</span>
        <div class="progress-bar" style="width: <%= (@tasks.where(status: 'completed').count.to_f / @tasks.count.to_f * 100).round(2) %>%;"></div>
      </div>
      <div class="flex items-center">
        <span class="mr-2">Pending:</span>
        <div class="progress-bar" style="width: <%= (@tasks.where(status: 'pending').count.to_f / @tasks.count.to_f * 100).round(2) %>%;"></div>
      </div>
    </div>
  </div>
</div>

<style>
  .progress-bar {
    height: 20px;
    background-color: #4caf50;
    border-radius: 4px;
  }
</style>

<script>
  var ctx = document.getElementById('taskStatusChart').getContext('2d');
  var taskStatusChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['Completed', 'Pending'],
      datasets: [{
        label: 'Task Status Distribution',
        data: [<%= @tasks.where(status: 'completed').count %>, <%= @tasks.where(status: 'pending').count %>],
        backgroundColor: [
          'rgba(46, 204, 113,0.5)',
          'rgba(52, 152, 219, 0.5)'
        ],
        borderColor: [
          'rgba(75, 192, 192, 1)',
          'rgba(255, 99, 132, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
    }
  });
</script>
